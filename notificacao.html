<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">

    <style>
        .grid_notification {
            position: absolute;
            z-index: 900;
            width: 100%;
            top: 1rem;
            display: block;
        }
        
        .notification {
            width: 800px;
            display: none;
            left: 50%;
            margin-left: -400px;
            animation: openNotification 1s ease-out forwards;
        }
        
        @keyframes openNotification {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0%);
                opacity: 1;
            }
        }
        
        .fadeOutNotification {
            animation: fadeOutNotification 0.5s ease-out forwards;
        }
        
        @keyframes fadeOutNotification {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }
    </style>
    <title>Notificação</title>
</head>

<body>
    <div id="grid_notification" class="grid_notification"></div>

    <div class="container has-text-centered">
        <div class="card" style="margin-top:35rem;">
            <div class="card-content">
                <a id="button" class="button is-success">Success</a>
            </div>
        </div>
    </div>

    <script>
        const grid_notification = document.getElementById("grid_notification")
            // const del = document.getElementById("delete")
        const button = document.getElementById("button")
        button.addEventListener('click', addNotification)

        function Notification() {
            let myself = {}
            myself.notification = document.createElement('div')
            myself.buttonClose = document.createElement('button')

            myself.getNotification = () => {
                myself.notification.appendChild(myself.buttonClose)
                return myself.notification
            }

            return myself
        }

        function createNotification(content) {
            const notification = Notification()
            notification.notification.id = "notification"
            notification.notification.classList.add("notification", "is-primary")
            notification.notification.style.display = "block"
            notification.notification.innerHTML = content

            notification.buttonClose.id = "delete"
            notification.buttonClose.classList.add("delete")

            return notification.getNotification()
        }

        const content = `Primar lorem ipsum dolor sit amet, consectetur adipiscing elit lorem ipsum dolor. <strong>Pellentesque risus mi</strong>, tempus quis placerat ut, porta nec nulla. Vestibulum rhoncus ac ex sit amet
        fringilla. Nullam gravida purus diam, et dictum <a>felis venenatis</a> efficitur.`

        function addNotification() {
            const notification = createNotification(content)
            grid_notification.appendChild(notification)
            autoCloseNotification(notification)

        }

        function autoCloseNotification(notification) {
            const fadeOutNotification = () => notification.classList.add("fadeOutNotification")
            const removeNotification = () => closeNotification(notification)

            setTimeout(() => {
                fadeOutNotification()
                setTimeout(removeNotification, 450)
            }, 3000)

        }

        function closeNotification(notification) {
            notification.parentNode.removeChild(notification)
        }

        // function timeCloseNotification(notification) {
        //     setTimeout(() => closeNotification(notification), 3000)
        // }

        // document.addEventListener('DOMContentLoaded', () => {
        //     (document.querySelectorAll('.notification .delete') || []).forEach(($delete) => {
        //         const $notification = $delete.parentNode;
        //         $delete.addEventListener('click', () => {
        //             $notification.parentNode.removeChild($notification);
        //         });
        //     });
        // });

        // del.addEventListener('click', () => {
        //     // notification.style.display = "none"
        // })
    </script>

</body>

</html>